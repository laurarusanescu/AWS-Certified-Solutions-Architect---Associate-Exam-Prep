# Amazon EC2 Instance Lifecycle — Exam Notes

## EC2 Capacity & Cloud Advantage
- EC2 allows **elastic scaling**
- No upfront hardware purchases
- Capacity can be changed via:
  - Console
  - API
- Pay-as-you-go lets you:
  - Match capacity to demand
  - Avoid overprovisioning

---

## What Makes Up an EC2 Instance
An EC2 instance consists of:
- vCPUs
- Memory (RAM)
- Networking
- Storage
- (Optional) GPUs

➡️ You choose the capacity when launching the instance.

---

## EC2 Instance Types — EXAM CRITICAL
Instance types define **hardware capacity**.

### Instance Type Format
Example: `c5.large`

- `c` → instance family (workload type)
- `5` → generation
- `large` → size (capacity)

---

## EC2 Instance Families (MEMORIZE)

### General Purpose
- Balanced CPU, memory, networking
- Use cases:
  - Web servers
  - Microservices
  - Development environments

---

### Compute Optimized
- High CPU performance
- Use cases:
  - High-performance web servers
  - Batch processing
  - HPC
  - Machine learning
  - Gaming servers

---

### Memory Optimized
- Large RAM capacity
- Use cases:
  - In-memory databases
  - Real-time analytics
  - Caching systems

---

### Accelerated Computing
- Uses GPUs or accelerators
- Use cases:
  - 3D rendering
  - Video encoding
  - Graphics-intensive workloads

---

### Storage Optimized
- High IOPS, low latency local storage
- Use cases:
  - NoSQL databases
  - Data warehousing
  - Elasticsearch
  - Analytics

---

## Where EC2 Instances Live

### Default VPC
- EC2 launches into **default VPC** by default
- Default VPC resources are:
  - Public
  - Internet-accessible

⚠️ Do NOT store sensitive data in default VPC

➡️ Best practice:
- Create **custom VPCs**
- Restrict access

---

## Architecting for High Availability (EXAM GOLD)
- EC2 is scoped to an **Availability Zone**
- Design for failure

### Best Practices
- Use **multiple instances**
- Spread instances across **multiple AZs**
- Prefer:
  - Many small instances
  - Over a few large instances

➡️ At least **2 EC2 instances in 2 AZs**

---

## EC2 Instance Lifecycle States (EXAM FAVORITE)

### Pending
- Instance is launching
- AMI copied to root volume
- Billing: ❌ NOT charged

---

### Running
- Instance is active
- Billing: ✅ STARTS

---

### Reboot
- OS-level reboot
- Same physical host
- Same public & private IP
- Instance store data preserved

---

### Stop / Start
- Instance may move to new host
- Instance store data is LOST
- Private IP remains
- Public IP changes
- Billing stops while stopped

---

### Terminated
- Instance deleted permanently
- Instance store erased
- Public & private IP lost
- Billing stops

---

## Stop vs Stop-Hibernate (EXAM DETAIL)

### Stop
- RAM data is LOST
- EBS volumes persist
- Can change instance type

---

### Stop-Hibernate
- RAM saved to EBS root volume
- Faster resume
- Useful for:
  - In-memory caching workloads

---

## EC2 Pricing Basics
- Billed per-second (shown per-hour)
- You pay only while instance is **running**
- Storage and networking billed separately
- Marketplace AMIs may have **1-hour minimum**

---

## EC2 Pricing Models — EXAM CRITICAL

### On-Demand Instances
- No commitment
- Pay per second
- Best for:
  - Short-term
  - Unpredictable workloads

---

### Reserved Instances (RIs)
- 1-year or 3-year commitment
- Significant discounts
- Payment options:
  - All Upfront (highest discount)
  - Partial Upfront
  - No Upfront
- You pay even if instance is stopped

➡️ Discount applies to:
- Instance type
- Availability Zone

---

### Spot Instances
- Use unused AWS capacity
- Up to **90% cheaper**
- Can be interrupted with **2-minute warning**

### Best For:
- Fault-tolerant workloads
- CI/CD
- Big data
- Batch jobs
- Rendering
- Test & dev

---

## Exam Takeaway Summary
- EC2 = elastic compute
- Instance families match workloads
- Use multiple AZs for HA
- Know lifecycle states
- On-Demand = flexible
- Reserved = steady workloads
- Spot = interruptible & cheap
